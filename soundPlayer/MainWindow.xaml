<Window x:Class="soundPlayer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Sound Player" Height="600" Width="950"
        Background="#181818" 
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        ResizeMode="CanResize">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32"  
                      ResizeBorderThickness="6" 
                      CornerRadius="0" 
                      GlassFrameThickness="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <Geometry x:Key="Icon_Folder">M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z</Geometry>
        <Geometry x:Key="Icon_Audio">M12,3V12.26C11.5,12.09 11,12 10.5,12C8,12 6,14 6,16.5C6,19 8,21 10.5,21C13,21 15,19 15,16.5V6H19V3H12Z</Geometry>
        <Geometry x:Key="Icon_Back">M11,9L12.42,10.42L8.83,14H18V16H8.83L12.42,19.58L11,21L5,15L11,9Z</Geometry>
        <Geometry x:Key="Icon_Home">M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z</Geometry>
        <Geometry x:Key="Icon_Error">M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z</Geometry>

        <Geometry x:Key="Win_Min">M0,10H10V11H0Z</Geometry>
        <Geometry x:Key="Win_Max">M1,1V9H9V1H1M0,0H10V10H0V0Z</Geometry>
        <Geometry x:Key="Win_Close">M1,0L5,4L9,0L10,1L6,5L10,9L9,10L5,6L1,10L0,9L4,5L0,1Z</Geometry>
        <Geometry x:Key="Icon_Check">M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z</Geometry>

        <DropShadowEffect x:Key="TextShadow" BlurRadius="3" ShadowDepth="1" Direction="315" Color="Black" Opacity="0.8" RenderingBias="Performance"/>
        <DropShadowEffect x:Key="ButtonShadow" BlurRadius="10" ShadowDepth="4" Direction="270" Color="Black" Opacity="0.5" RenderingBias="Performance"/>

        <Style x:Key="WindowBtnStyle" TargetType="Button">
            <Setter Property="Width" Value="46"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" x:Name="border">
                            <Path Data="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" 
                                  Fill="#AAA" Width="10" Height="10" Stretch="Uniform"
                                  HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="icon"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#33FFFFFF"/>
                                <Setter TargetName="icon" Property="Fill" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#33FFFFFF"/>
                                <Setter TargetName="icon" Property="Fill" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#11FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CloseBtnStyle" TargetType="Button" BasedOn="{StaticResource WindowBtnStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" x:Name="border">
                            <Path Data="{StaticResource Win_Close}" Fill="#AAA" Width="10" Height="10" Stretch="Uniform"
                                  HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="icon"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#E81123"/>
                                <Setter TargetName="icon" Property="Fill" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#E81123"/>
                                <Setter TargetName="icon" Property="Fill" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#B00D1B"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="TopMenuBtnStyle" TargetType="Button">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                BorderBrush="Transparent" 
                                BorderThickness="2"
                                Effect="{StaticResource ButtonShadow}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="White"/>
                                <Setter TargetName="border" Property="Background" Value="#CC8B0000"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.9"/>
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform Y="-1"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform Y="1"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DarkCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="Foreground" Value="#CCC"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal" Background="Transparent">
                            <Border x:Name="checkBoxBorder" Width="18" Height="18" 
                                    Background="Transparent" 
                                    BorderBrush="White" 
                                    BorderThickness="1" 
                                    CornerRadius="3"
                                    VerticalAlignment="Center">
                                <Path x:Name="checkMark" 
                                      Data="{StaticResource Icon_Check}" 
                                      Fill="White" 
                                      Stretch="Uniform" Width="12" Height="12"
                                      Visibility="Collapsed"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                            </Border>
                            <ContentPresenter Content="{TemplateBinding Content}" 
                                              Margin="8,0,0,0" 
                                              VerticalAlignment="Center"
                                              TextBlock.Foreground="{TemplateBinding Foreground}"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="checkBoxBorder" Property="BorderBrush" Value="#FFFFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="checkBoxBorder" Property="BorderBrush" Value="White"/>
                                <Setter TargetName="checkBoxBorder" Property="Background" Value="Red"/>
                                <Setter TargetName="checkBoxBorder" Property="BorderThickness" Value="2"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="checkBoxBorder" Property="BorderBrush" Value="#BBB"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ScrollThumb" TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Border x:Name="grid" Background="#333" CornerRadius="4"/>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="grid" Property="Background" Value="#555" />
                            </Trigger>
                            <Trigger Property="IsDragging" Value="True">
                                <Setter TargetName="grid" Property="Background" Value="#777" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type ScrollBar}">
            <Setter Property="Stylus.IsFlicksEnabled" Value="false" />
            <Setter Property="Foreground" Value="#333" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Width" Value="8" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollBar}">
                        <Grid x:Name="GridRoot" Width="8" Background="{TemplateBinding Background}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="0.00001*" />
                            </Grid.RowDefinitions>
                            <Track x:Name="PART_Track" Grid.Row="0" IsDirectionReversed="true" Focusable="false">
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource ScrollThumb}" />
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="Width" Value="Auto" />
                    <Setter Property="Height" Value="8" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ScrollBar}">
                                <Grid x:Name="GridRoot" Height="8" Background="{TemplateBinding Background}">
                                    <Track x:Name="PART_Track" IsDirectionReversed="true" Focusable="false">
                                        <Track.Thumb>
                                            <Thumb Style="{StaticResource ScrollThumb}" />
                                        </Track.Thumb>
                                    </Track>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border BorderBrush="#333">
        <Border.Style>
            <Style TargetType="Border">
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="0"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding WindowState, RelativeSource={RelativeSource AncestorType=Window}}" Value="Maximized">
                        <Setter Property="Padding" Value="8"/>
                        <Setter Property="BorderThickness" Value="0"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Border.Style>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="32"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Background="#181818">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" Margin="10,0,0,0" VerticalAlignment="Center" IsHitTestVisible="False">
                    <Image Source="/ffdd0ab1-620f-49e5-b3aa-e7cc1bf31f85_removalai_preview.png" Width="16" Height="16" Margin="0,0,8,0"/>
                    <TextBlock Text="Sound Player" Foreground="#CCC" FontSize="12" FontFamily="Segoe UI" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Style="{StaticResource WindowBtnStyle}" Content="{StaticResource Win_Min}" Click="OnMinimizeClick"/>
                    <Button x:Name="BtnMaximize" Style="{StaticResource WindowBtnStyle}" Content="{StaticResource Win_Max}" Click="OnMaximizeClick" Visibility="Collapsed"/>
                    <Button Style="{StaticResource CloseBtnStyle}" Click="OnCloseClick"/>
                </StackPanel>
            </Grid>

            <Grid Grid.Row="1" Margin="15,10,15,10">
                <Grid.Background>
                    <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                        <GradientStop Color="#FF313131"/>
                        <GradientStop Color="#FF2D0303" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" Click="OnHomeClick" ToolTip="Go Home"
                        Style="{StaticResource TopMenuBtnStyle}"
                        Background="#FF676767" Margin="0,0,15,0"
                        Padding="10,6"
                        TabIndex="0">
                    <Path Data="{StaticResource Icon_Home}" Fill="#DDD" Width="14" Height="14" Stretch="Uniform">
                        <Path.Effect>
                            <DropShadowEffect BlurRadius="2" ShadowDepth="1" Opacity="0.5"/>
                        </Path.Effect>
                    </Path>
                </Button>

                <TextBlock Grid.Column="1" x:Name="CurrentPathText" Text="C:\" 
                           Foreground="#888" VerticalAlignment="Center" 
                           FontSize="12" FontFamily="Consolas"
                           Effect="{StaticResource TextShadow}"/>

                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <CheckBox x:Name="SingleModeCheckbox" Content="One at a time" 
                              Style="{StaticResource DarkCheckBoxStyle}"
                              Margin="0,0,20,0" IsChecked="True"
                              TabIndex="1" Background="White"/>

                    <Button Content="■  STOP ALL" Click="OnStopAllClick"
                            Style="{StaticResource TopMenuBtnStyle}"
                            Background="#8B0000" Foreground="White" FontWeight="Bold"
                            Padding="15,6"
                            TabIndex="2"/>
                </StackPanel>
            </Grid>

            <Grid Grid.Row="2">
                <Canvas x:Name="WaveCanvas" IsHitTestVisible="False" ClipToBounds="True">
                    <Polyline x:Name="WaveLine" Stroke="#4400FF00" StrokeThickness="2" StrokeLineJoin="Round"/>
                </Canvas>

                <ListBox x:Name="SoundList" Margin="15" 
                         Background="Transparent" BorderThickness="0"
                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                         ScrollViewer.PanningMode="VerticalOnly"
                         TabIndex="3"
                         FocusVisualStyle="{x:Null}">

                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal" IsItemsHost="True"/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>

                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <EventSetter Event="PreviewMouseLeftButtonUp" Handler="OnItemMouseClick"/>
                            <EventSetter Event="PreviewKeyDown" Handler="OnItemKeyDown"/>
                            <Setter Property="Margin" Value="8"/>
                            <Setter Property="Padding" Value="0"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Cursor" Value="Hand"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <Border x:Name="border"
                                                Background="#B22D2D30"
                                                CornerRadius="6" Padding="8"
                                                Width="160" Height="70"
                                                Effect="{StaticResource ButtonShadow}"
                                                CacheMode="BitmapCache"
                                                SnapsToDevicePixels="True"
                                                UseLayoutRounding="True">
                                            <ContentPresenter/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#E6383838"/>
                                                <Setter TargetName="border" Property="RenderTransform">
                                                    <Setter.Value>
                                                        <TranslateTransform Y="-1"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#E6383838"/>
                                                <Setter TargetName="border" Property="BorderBrush" Value="White"/>
                                                <Setter TargetName="border" Property="BorderThickness" Value="1"/>
                                            </Trigger>
                                            <DataTrigger Binding="{Binding Type}" Value="Folder">
                                                <Setter TargetName="border" Property="Background" Value="#B2A07020"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Type}" Value="Back">
                                                <Setter TargetName="border" Property="Background" Value="#B2404040"/>
                                            </DataTrigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListBox.ItemContainerStyle>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top">
                                    <Path x:Name="BtnIcon" Data="{StaticResource Icon_Audio}" 
                                          Fill="#999" Width="14" Height="14" Stretch="Uniform">
                                        <Path.Effect>
                                            <DropShadowEffect BlurRadius="2" ShadowDepth="1" Opacity="0.4"/>
                                        </Path.Effect>
                                    </Path>
                                    <TextBlock x:Name="BtnExt" Text="{Binding Extension}" 
                                               Foreground="#777" FontSize="10" Margin="5,-2,0,0" 
                                               FontWeight="Bold" FontFamily="Segoe UI"
                                               Effect="{StaticResource TextShadow}"/>
                                </StackPanel>

                                <TextBlock Text="{Binding Name}" 
                                           Foreground="#E0E0E0" FontSize="13" FontWeight="SemiBold"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                           TextWrapping="Wrap" TextAlignment="Center" Margin="0,12,0,0"
                                           Effect="{StaticResource TextShadow}"/>
                            </Grid>

                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Type}" Value="Folder">
                                    <Setter TargetName="BtnIcon" Property="Data" Value="{StaticResource Icon_Folder}"/>
                                    <Setter TargetName="BtnIcon" Property="Fill" Value="#666"/>
                                    <Setter TargetName="BtnExt" Property="Foreground" Value="#E0E0E0"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Type}" Value="Back">
                                    <Setter TargetName="BtnIcon" Property="Data" Value="{StaticResource Icon_Back}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <StackPanel x:Name="ErrorPanel" Visibility="Collapsed" 
                            HorizontalAlignment="Center" VerticalAlignment="Center" 
                            IsHitTestVisible="False">
                    <Path Data="{StaticResource Icon_Error}" 
                          Fill="#B00D1B" Width="48" Height="48" Stretch="Uniform" HorizontalAlignment="Center" Margin="0,0,0,10">
                        <Path.Effect>
                            <DropShadowEffect BlurRadius="10" ShadowDepth="0" Color="#E81123" Opacity="0.4"/>
                        </Path.Effect>
                    </Path>
                    <TextBlock Text="Directory not found" 
                               Foreground="#CCC" FontSize="18" FontWeight="SemiBold" 
                               TextAlignment="Center" FontFamily="Segoe UI"/>
                    <TextBlock x:Name="ErrorDetailText" Text="The selected path does not exist." 
                               Foreground="#888" FontSize="14" Margin="0,5,0,0" 
                               TextAlignment="Center" TextWrapping="Wrap" MaxWidth="400"/>
                </StackPanel>

                <StackPanel x:Name="NotificationStack"
                            Grid.Row="2"
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Bottom"
                            Margin="0,0,20,20"
                            IsHitTestVisible="False"/>
            </Grid>
        </Grid>
    </Border>
</Window>